{"version":3,"file":null,"sources":["src/Annotation.js","src/AnnotationCollection.js","src/Handles.js","src/Note/alignment.js","src/Builder.js","src/Note/lineType-vertical.js","src/Note/lineType-horizontal.js","src/Connector/type-line.js","src/Connector/type-elbow.js","src/Connector/type-curve.js","src/Connector/end-arrow.js","src/Connector/end-dot.js","src/Subject/circle.js","src/Subject/rect.js","src/Subject/threshold.js","src/Subject/badge.js","src/Types-d3.js","src/Adapter-d3.js","index.js"],"sourcesContent":["\nexport default class Annotation {\n  constructor({ x=0, y=0, dy=0, dx=0, data, type, subject, connector, note, \n    disable, id, className }) {\n\n    this._dx = dx\n    this._dy = dy \n    this._x = x \n    this._y = y\n    this.id = id\n    this._className = className || ''\n\n    this.type = type || ''\n    this.data = data\n\n    this.note = note || {}\n    this.connector = connector || {}\n    this.subject = subject || {}\n\n    this.disable = disable || []\n  }\n\n  updatePosition(){\n    if (this.type.setPosition) { \n      this.type.setPosition() \n      if (this.type.subject.selectAll(':not(.handle)').nodes().length !== 0) {\n        this.type.redrawSubject()\n      }\n    }\n  }\n\n  get className() { return this._className }\n\n  set className(className){\n    this._className = className\n    if (this.type.setClassName) this.type.setClassName()\n  }\n\n  updateOffset(){\n    if (this.type.setOffset) {\n      this.type.setOffset() \n            \n      if (this.type.connector.selectAll(':not(.handle)').nodes().length !== 0) {\n        this.type.redrawConnector()\n      }\n\n      this.type.redrawNote()\n    }\n  }\n\n  get x() { return this._x }\n  set x(x) { \n    this._x = x; \n    this.updatePosition()\n  }\n\n  get y() { return this._y }\n  set y(y) { \n    this._y = y; \n    this.updatePosition()\n  }\n\n  get dx() { return this._dx }\n  set dx(dx) { \n    this._dx = dx; \n    this.updateOffset()\n  }\n\n  get dy() { return this._dy }\n  set dy(dy) { \n    this._dy = dy; \n    this.updateOffset()\n  }\n\n  get offset() { return { x: this._dx, y: this._dy }}\n\n  set offset({ x, y }) {\n    this._dx = x\n    this._dy = y\n    this.updateOffset()\n  }\n\n  get position() { return { x: this._x, y: this._y }}\n\n  set position({ x, y }) {\n    this._x = x\n    this._y = y\n    this.updatePosition()\n  }\n\n  get translation() {\n    return {\n    x: this._x + this._dx,\n    y: this._y + this._dy\n  }}\n\n  get json() { \n    const json = {\n      x: this._x,\n      y: this._y,\n      dx: this._dx,\n      dy: this._dy\n    }\n\n    if (this.data && Object.keys(this.data).length > 0) json.data = this.data\n    if (this.type) json.type = this.type\n    if (this._className) json.className = this._className\n\n    if (Object.keys(this.connector).length > 0) json.connector = this.connector\n    if (Object.keys(this.subject).length > 0) json.subject = this.subject\n    if (Object.keys(this.note).length > 0) json.note = this.note\n    \n    return json\n  }\n}","export default class AnnotationCollection {\n\n  constructor({ annotations, accessors, accessorsInverse }) {\n    this.accessors = accessors\n    this.accessorsInverse = accessorsInverse\n    this.annotations = annotations\n  }\n\n  clearTypes(newSettings) {\n    this.annotations.forEach(d => {\n      d.type = undefined\n      d.subject = newSettings && newSettings.subject || d.subject\n      d.connector = newSettings && newSettings.connector || d.connector\n      d.note = newSettings && newSettings.note || d.note\n    })\n  }\n\n  setPositionWithAccessors() {\n    this.annotations.forEach(d => {\n      d.type.setPositionWithAccessors(this.accessors)\n    })\n  }\n\n  editMode(editMode) { this.annotations.forEach(a => {\n      if (a.type) {\n        a.type.editMode = editMode\n        a.type.updateEditMode()\n      }\n    })\n  }\n\n  updateDisable(disable) {\n    this.annotations.forEach(a => {\n      a.disable = disable\n      if (a.type){\n        disable.forEach(d => {\n          if (a.type[d]){\n          a.type[d].remove && a.type[d].remove()\n          a.type[d] = undefined\n          }\n        })\n      }\n    })\n  }\n\n  updateTextWrap(textWrap) {\n    this.annotations.forEach(a => {\n      if (a.type && a.type.updateTextWrap){\n        a.type.updateTextWrap(textWrap)\n      }\n    })\n  }\n\n  updateNotePadding(notePadding) {\n    this.annotations.forEach(a => {\n      if (a.type){\n        a.type.notePadding = notePadding\n      }\n    })\n  }\n\n  get json() { \n    return this.annotations.map(a => {      \n      const json = a.json\n      if (this.accessorsInverse && a.data){\n        json.data = {}\n        Object.keys(this.accessorsInverse).forEach(k => {\n          json.data[k] = this.accessorsInverse[k]({ x: a.x, y: a.y})\n\n          //TODO make this feasible to map back to data for other types of subjects\n        })\n      }\n      return json\n    })\n  }\n\n  get noteNodes(){\n    return this.annotations.map(a => ({ ...a.type.getNoteBBoxOffset(), positionX: a.x, positionY: a.y }))\n  }\n\n  //TODO: come back and rethink if a.x and a.y are applicable in all situations\n  // get connectorNodes() {\n  //   return this.annotations.map(a => ({ ...a.type.getConnectorBBox(), startX: a.x, startY: a.y}))\n  // }\n\n  // get subjectNodes() {\n  //   return this.annotations.map(a => ({ ...a.type.getSubjectBBox(), startX: a.x, startY: a.y}))\n  // }\n\n  // get annotationNodes() {\n  //   return this.annotations.map(a => ({ ...a.type.getAnnotationBBox(), startX: a.x, startY: a.y}))\n  // }\n}\n","import { select } from 'd3-selection'\nimport { drag } from 'd3-drag'\n\n\nexport const pointHandle = ({ cx=0, cy=0 }) => {\n  return { move: { x: cx, y: cy} }\n}\n\nexport const circleHandles = ({ cx=0, cy =0, r1, r2, padding }) => {\n  const h = { move: { x: cx, y: cy}}\n       \n  if (r1 !== undefined) {\n    h.r1 = { x: cx + r1/Math.sqrt(2), y: cy + r1/Math.sqrt(2) }\n  }\n  \n  if (r2 !== undefined) {\n    h.r2 = { x: cx + r2/Math.sqrt(2), y: cy + r2/Math.sqrt(2) }\n  }\n\n  if (padding !== undefined) {\n    h.padding = { x: cx + r1 + padding, y: cy}\n  }\n\n  return h\n}\n\nexport const rectHandles = ({ x1=0, y1=0, x2=x1, y2=y1, width, height }) => {\n  \n  const w = width || Math.abs(x2 - x1)\n  const h = height || Math.abs(y2 - y1)\n\n  return {\n    move: {\n      x: Math.min(x1, x2) + w/2,\n      y: Math.min(y1, y2) - 10\n    },\n    width: {\n      x: Math.max(x1, x2),\n      y: Math.min(y1, y2) + h/2\n    },\n    height: {\n      x: Math.min(x1, x2) + w/2,\n      y: Math.max(y1, y2)\n    }\n  }\n}\n\nexport const lineHandles = ({ x1, y1, x2, y2, x, y}) => {\n\n  const minY = Math.min(y1, y2)\n  const minX = Math.min(x1, x2)\n\n  const height = Math.abs(y2 - y1)\n  const width = Math.abs(x2 - x1)\n  \n  return {\n    move: {\n      x: x || minX + width/2,\n      y: y || minY + height/2\n    }\n  }\n}\n\n//arc handles\nexport const addHandles = ({ group, handles, r=10}) => { \n   //give it a group and x,y to draw handles\n   //then give it instructions on what the handles change \n   const h = group.selectAll('circle.handle')\n    .data(handles)\n\n  h.enter()\n    .append('circle')\n    .attr('class', 'handle')\n    .call(drag()\n      .container(select('g.annotations').node())\n      .on('start', d => d.start && d.start(d))\n      .on('drag', d => d.drag && d.drag(d))\n      .on('end', d => d.end && d.end(d))\n    )\n\n  group.selectAll('circle.handle')\n    .attr('cx', d => d.x)\n    .attr('cy', d => d.y)\n    .attr('r', d => d.r || r)\n    .attr('class', d => `handle ${d.className || ''}`)\n\n  h.exit()\n    .remove()\n    \n}\n\n","\nexport const leftRightDynamic = (align, y) => {\n  if (align == \"dynamic\" || align == \"left\" || align == \"right\"){\n      if (y < 0){ align = \"top\" }\n      else { align = \"bottom\" } \n  }\n  return align\n}\n\nexport const topBottomDynamic = (align, x) => {\n  if (align == \"dynamic\" || align == \"top\" || align == \"bottom\"){\n    if (x < 0){ align = \"right\" }\n    else { align = \"left\" }      \n  }\n  return align\n}\n\n\nexport default ({ padding, bbox, align, orientation, offset }) => {\n    let x = -bbox.x \n    let y = -bbox.y\n\n   if ( orientation === \"topBottom\" ){\n      align = topBottomDynamic(align, offset.x)\n      if (offset.y < 0){ \n        y -= (bbox.height + padding)\n     } else {\n       y += padding\n     }\n\n      if ( align === \"middle\" ) {\n        x -= bbox.width/2\n      } else if (align === \"right\" ) {\n        x -= (bbox.width)\n      } \n\n    } else if ( orientation === \"leftRight\" ){\n      align = leftRightDynamic(align, offset.y)\n      if (offset.x < 0){ \n        x -= (bbox.width + padding) \n      } else {\n        x += padding\n      }\n\n       if ( align === \"middle\" ) {\n          y -= bbox.height/2\n       } else if (align === \"top\" ){\n          y -= (bbox.height )\n       }\n    } \n\n    return { x, y }\n}","import { line, arc, curveLinear, symbol, symbolTriangle } from \"d3-shape\"\n\nexport const lineBuilder = ({ data, curve=curveLinear, canvasContext, className }) => { \n  const lineGen = line()\n    .curve(curve)\n\n  const builder = {\n    type: 'path',\n    className,\n    data\n  }\n\n  if (canvasContext) {\n    lineGen.context(canvasContext)\n    builder.pathMethods = lineGen\n\n  } else {\n    builder.attrs = {\n      d: lineGen(data)\n    }\n  }\n\n  return builder\n}\n\nexport const arcBuilder = ({ data, canvasContext, className }) => {\n\n  const builder = {\n    type: 'path',\n    className,\n    data\n  }\n\n  const arcShape = arc()\n    .innerRadius(data.innerRadius || 0)\n    .outerRadius(data.outerRadius || data.radius || 2)\n    .startAngle(data.startAngle || 0)\n    .endAngle(data.endAngle || 2*Math.PI)\n\n  if (canvasContext) {\n    arcShape.context(canvasContext)\n    builder.pathMethods = lineGen\n\n  } else {\n    \n    builder.attrs = {\n      d: arcShape()\n    }\n  }\n\n  return builder\n}","import { lineBuilder } from '../Builder'\nimport { leftRightDynamic } from './alignment'\n\nexport default ({ align, x=0, y=0, bbox, offset, padding }) => {\n  align = leftRightDynamic(align, offset.y)\n\n  if (align == \"top\") { y -= bbox.height } \n  else if (align == \"middle\"){ y -= bbox.height/2 }\n\n  const data = [[x, y], [x, y + bbox.height]]\n  return { components: [lineBuilder({ data, className : \"note-line\" })] }\n}","import { lineBuilder } from '../Builder'\nimport { topBottomDynamic } from './alignment'\n\nexport default ({ align, x=0, y=0, offset, bbox, padding }) => {\n  align = topBottomDynamic(align, offset.x)\n\n  if (align == \"right\") { x -= bbox.width }\n  else if (align == \"middle\"){ x -= bbox.width/2 }\n\n  const data = [[x, y], [x + bbox.width, y]]\n  return { components: [lineBuilder({ data, className : \"note-line\" })] }\n}","import { lineBuilder } from '../Builder'\n\nexport const lineSetup = ({ type, subjectType }) => {\n  let annotation = type.annotation\n  let offset = annotation.position\n  \n  let x1 = annotation.x - offset.x,\n    x2 = x1 + annotation.dx,\n    y1 = annotation.y - offset.y,\n    y2 = y1 + annotation.dy\n\n\n const subjectData = annotation.subject\n\n  if (subjectType == \"circle\" && (subjectData.outerRadius || subjectData.radius)){\n    const h =  Math.sqrt((x1 - x2)*(x1 - x2) + (y1 - y2)*(y1 - y2))\n    const angle = Math.asin(-y2/h)\n    const r = subjectData.outerRadius || subjectData.radius + (subjectData.radiusPadding || 0)\n\n    x1 = Math.abs(Math.cos(angle)*r)*(x2 < 0 ? -1 : 1)\n    y1 = Math.abs(Math.sin(angle)*r)*(y2 < 0 ? -1 : 1)\n\n  }\n\n  if (subjectType == \"rect\"){\n      const { width, height } = subjectData\n      \n      if ((width > 0 && annotation.dx > 0) || (width < 0 && annotation.dx < 0)) {\n          if (Math.abs(width) > Math.abs(annotation.dx)) x1 = width/2\n          else x1 = width\n      } \n      if ((height > 0 && annotation.dy > 0) || (height < 0 && annotation.dy < 0)) {\n          if (Math.abs(height) > Math.abs(annotation.dy)) y1 = height/2\n          else y1 = height\n      }\n      if (x1 == width/2 && y1 == height/2){ x1 = x2; y1 = y2;}\n    }\n\n\n  return [[x1, y1], [x2, y2]]\n}\n\nexport default (connectorData) => {\n  const data = lineSetup(connectorData)\n  return { components: [lineBuilder({ data, className : \"connector\" })]} \n}","import { lineBuilder } from '../Builder'\n\nexport default ({ type, subjectType }) => {\n\n    const annotation = type.annotation\n    const offset = annotation.position\n\n    let x1 = annotation.x - offset.x,\n    x2 = x1 + annotation.dx,\n    y1 = annotation.y - offset.y,\n    y2 = y1 + annotation.dy\n\n    const subjectData = annotation.subject\n\n    if (subjectType == \"rect\"){\n      const { width, height } = subjectData\n      \n      if ((width > 0 && annotation.dx > 0) || (width < 0 && annotation.dx < 0)) {\n          if (Math.abs(width) > Math.abs(annotation.dx)) x1 = width/2\n          else x1 = width\n      } \n      if ((height > 0 && annotation.dy > 0) || (height < 0 && annotation.dy < 0)) {\n          if (Math.abs(height) > Math.abs(annotation.dy)) y1 = height/2\n          else y1 = height\n      }\n      if (x1 == width/2 && y1 == height/2){ x1 = x2; y1 = y2;}\n    }\n\n    let data = [[x1, y1], [x2, y2]]\n\n    let diffY = (y2 - y1)\n    let diffX = (x2 - x1)\n    let xe = x2 \n    let ye = y2\n    let opposite = (y2 < y1 && x2 > x1 || x2 < x1 && y2 > y1)? -1 : 1\n\n    if (Math.abs(diffX) < Math.abs(diffY)){\n      xe = x2\n      ye = y1 + diffX*opposite\n    } else {\n      ye = y2\n      xe = x1 + diffY*opposite\n    }\n    \n    if (subjectType == \"circle\" && (subjectData.outerRadius || subjectData.radius)){\n      const r = (subjectData.outerRadius || subjectData.radius) + (subjectData.radiusPadding || 0)\n      const length = r/Math.sqrt(2)\n\n      if (Math.abs(diffX) > length && Math.abs(diffY) > length){\n        x1 = length*(x2 < 0 ? -1 : 1)\n        y1 = length*(y2 < 0 ? -1 : 1)\n        data = [[x1, y1], [xe , ye ], [x2, y2]]\n\n      } else if (Math.abs(diffX) > Math.abs(diffY)){\n        const angle = Math.asin(-y2/r)\n        x1 = Math.abs(Math.cos(angle)*r)*(x2 < 0 ? -1 : 1)\n        data = [[ x1, y2], [x2, y2]]\n      } else {\n        const angle = Math.acos(x2/r)\n        y1 = Math.abs(Math.sin(angle)*r)*(y2 < 0 ? -1 : 1)\n        data = [[ x2, y1], [x2, y2]]\n      }\n    } else {\n      data = [[x1, y1], [xe , ye], [x2, y2]]\n    }\n\n    return { components: [lineBuilder({ data, className: \"connector\"})]}\n}\n","import { lineBuilder } from '../Builder'\nimport { event } from 'd3-selection'\nimport { lineSetup } from './type-line'\nimport { curveCatmullRom } from 'd3-shape'\nimport { pointHandle } from '../Handles'\n\nexport default ({ type, connectorData, subjectType }) => {\n\n  if (!connectorData){ connectorData = {} }\n  if (!connectorData.points || typeof connectorData.points === \"number\"){ \n    connectorData.points = createPoints(type.annotation.offset, connectorData.points) \n  }\n  if (!connectorData.curve){ connectorData.curve = curveCatmullRom }\n\n  let handles = []\n\n  if (type.editMode) {\n    const cHandles = connectorData.points\n      .map((c,i) => ({...pointHandle({cx: c[0], cy: c[1]}), index: i}))\n\n    const updatePoint = (index) => {      \n        connectorData.points[index][0] += event.dx\n        connectorData.points[index][1] += event.dy\n        type.redrawConnector()\n    }\n  \n    handles = type.mapHandles(cHandles\n      .map(h => ({ ...h.move, drag: updatePoint.bind(type, h.index)})))\n\n  }\n\n  let data = lineSetup({ type, subjectType })\n  data = [data[0], ...connectorData.points, data[1]]\n  const components = [lineBuilder({ data, curve: connectorData.curve, className: \"connector\" })]\n\n  return { components , handles }\n}\n\nconst createPoints = function( offset, anchors=2){\n  const diff = { x: offset.x/(anchors + 1), y: offset.y/(anchors + 1) }\n  const p = []\n\n  let i = 1 \n  for (; i <= anchors; i++){\n    p.push([diff.x*i + i%2*20, diff.y*i - i%2*20])\n  }\n  return p\n}","import { lineBuilder } from '../Builder'\n\nexport default ({ annotation, start, end }) => {\n  const offset = annotation.position\n  if (!start) { start = [annotation.dx, annotation.dy]} \n  else { start = [-end[0] + start[0], - end[1] + start[1]]}\n  if (!end) { end = [annotation.x - offset.x, annotation.y - offset.y]}\n\n  let x1 = end[0],\n    y1 = end[1];\n\n  let dx = start[0] \n  let dy = start[1] \n\n  let size = 10;\n  let angleOffset = 16/180*Math.PI\n  let angle = Math.atan(dy/dx) \n\n  if (dx < 0 ) {\n    angle += Math.PI\n  }\n\n  const data = [[x1, y1], \n    [Math.cos(angle + angleOffset)*size + x1, Math.sin(angle + angleOffset)*size + y1],\n    [Math.cos(angle - angleOffset)*size + x1, Math.sin(angle - angleOffset)*size + y1],\n    [x1, y1]]\n\n  //TODO add in reverse\n  // if (canvasContext.arrowReverse){\n  //   data = [[x1, y1], \n  //   [Math.cos(angle + angleOffset)*size, Math.sin(angle + angleOffset)*size],\n  //   [Math.cos(angle - angleOffset)*size, Math.sin(angle - angleOffset)*size],\n  //   [x1, y1]\n  //   ]\n  // } else {\n  //   data = [[x1, y1], \n  //   [Math.cos(angle + angleOffset)*size, Math.sin(angle + angleOffset)*size],\n  //   [Math.cos(angle - angleOffset)*size, Math.sin(angle - angleOffset)*size],\n  //   [x1, y1]\n  //   ]\n  // }\n\n  return { components: [lineBuilder({ data, className : 'connector-arrow' })] }\n}\n","import { arcBuilder } from '../Builder'\n\nexport default ({ line }) => {\n  \n  let dot = arcBuilder({ className: 'connector-dot', data: { radius: 3} })\n  dot.attrs.transform = `translate(${line.data[0][0]}, ${line.data[0][1]})`\n  \n  return { components: [dot] }\n}\n","import { circleHandles } from '../Handles'\nimport { arcBuilder } from '../Builder'\nimport { event } from 'd3-selection'\n\nexport default ({ subjectData, type}) => {\n    if (!subjectData.radius && !subjectData.outerRadius ){ subjectData.radius = 20 }\n\n    let handles = []\n    const c = arcBuilder({ data: subjectData, className: \"subject\" })\n    if (type.editMode){\n      const h = circleHandles({\n        r1: c.data.outerRadius || c.data.radius,\n        r2: c.data.innerRadius,\n        padding: subjectData.radiusPadding\n      })\n\n      const updateRadius = (attr) => {      \n        const r = subjectData[attr] + event.dx*Math.sqrt(2)\n        subjectData[attr] = r\n        type.redrawSubject()\n        type.redrawConnector()\n      }\n\n      const cHandles = [\n        { ...h.r1, drag: updateRadius.bind(type, subjectData.outerRadius !== undefined ? 'outerRadius': 'radius')}\n        ]\n\n      if (subjectData.innerRadius){\n        cHandles.push({ ...h.r2, drag: updateRadius.bind(type, 'innerRadius')})\n      }\n      handles = type.mapHandles(cHandles)\n    }\n\n    return { components: [c], handles }\n}","import { circleHandles } from '../Handles'\nimport { lineBuilder } from '../Builder'\nimport { event } from 'd3-selection'\n\nexport default ({ subjectData, type}) => {\n    if (!subjectData.width){ subjectData.width = 100 }\n    if (!subjectData.height){ subjectData.height = 100 }\n\n    let handles = []\n    let { width, height } = subjectData\n\n    const data = [[0, 0], \n      [ width, 0], \n      [ width, height], \n      [0, height],\n      [0, 0]]\n    let rect = lineBuilder({ data, className : 'subject'})\n\n    if (type.editMode){\n\n      const updateWidth = (attr) => {  \n        subjectData.width = event.x\n        type.redrawSubject()\n        type.redrawConnector()\n      }\n\n      const updateHeight = () => {\n        subjectData.height = event.y\n        type.redrawSubject()\n        type.redrawConnector()\n      }\n\n      const rHandles = [{ x: width, y: height/2, drag: updateWidth.bind(type) },\n        { x: width/2, y: height, drag: updateHeight.bind(type) }\n      ]\n\n      handles = type.mapHandles(rHandles)\n\n    }\n\n    return { components: [rect], handles }\n}","import { circleHandles } from '../Handles'\nimport { lineBuilder } from '../Builder'\n\n\nexport default ({ subjectData, type }) => {\n  const offset = type.annotation.position\n\n  let x1 = (subjectData.x1 !== undefined ? subjectData.x1 : offset.x) - offset.x,\n    x2 = (subjectData.x2 !== undefined ? subjectData.x2 : offset.x) - offset.x,\n    y1 = (subjectData.y1 !== undefined ? subjectData.y1 : offset.y) - offset.y,\n    y2 = (subjectData.y2 !== undefined ? subjectData.y2 : offset.y) - offset.y\n\n  const data = [[x1, y1], [x2, y2]]\n  return { components: [lineBuilder({ data, className : 'subject'})]}\n}","import { circleHandles } from '../Handles'\nimport { lineBuilder, arcBuilder } from '../Builder'\nimport { event } from 'd3-selection'\n\nexport default ({ subjectData, type }) => {\n  if (!subjectData.radius ) subjectData.radius = 14\n  if (!subjectData.x) subjectData.x =\"left\"\n  if (!subjectData.y) subjectData.y = \"top\"\n\n  let handles = []\n  const radius = subjectData.radius\n  const innerRadius = radius*.7\n  const x = subjectData.x == \"left\" ? -radius : radius\n  const y = subjectData.y == \"top\" ? -radius : radius\n  const transform = `translate(${x}, ${y})`\n  const circlebg = arcBuilder({ className: 'subject', data: { radius} }) \n  circlebg.attrs.transform = transform\n\n  const circle = arcBuilder({ className: 'subject-ring', data: { outerRadius: radius, innerRadius} })\n  circle.attrs.transform = transform\n\n  const pointer = lineBuilder({ className: 'subject-pointer',\n    data: [[0, 0], [x, 0], [0, y], [0, 0]]\n  })\n\n  if (type.editMode){\n\n    const dragBadge = () => {\n      subjectData.x = event.x < 0 ? \"left\" : \"right\"\n      subjectData.y = event.y < 0 ? \"top\" : \"bottom\"\n      type.redrawSubject()\n    }\n\n    const bHandles = [{ x: x*2, y: y*2, drag: dragBadge.bind(type)}]\n    handles = type.mapHandles(bHandles)\n\n  }\n\n  let text\n  if (subjectData.text){\n    text = {\n      type: \"text\",\n      className: \"badge-text\",\n      attrs: {\n        text: subjectData.text,\n        \"text-anchor\": \"middle\",\n        dy: \".25em\",\n        x,\n        y\n      }\n    }\n  }\n  return { components: [pointer, circlebg, circle, text], handles }\n}","import { select, event } from 'd3-selection'\nimport { drag } from 'd3-drag'\nimport { Annotation } from './Annotation'\nimport { addHandles } from './Handles'\n\n//Note options\nimport noteAlignment from './Note/alignment'\nimport noteVertical from './Note/lineType-vertical'\nimport noteHorizontal from './Note/lineType-horizontal'\n\n//Connector options\nimport connectorLine from './Connector/type-line'\nimport connectorElbow from './Connector/type-elbow'\nimport connectorCurve from './Connector/type-curve'\nimport connectorArrow from './Connector/end-arrow'\nimport connectorDot from './Connector/end-dot'\n\n//Subject options\nimport subjectCircle from './Subject/circle'\nimport subjectRect from './Subject/rect'\nimport subjectThreshold from './Subject/threshold'\nimport subjectBadge from './Subject/badge'\n\nexport class Type {\n  constructor({ a, annotation, editMode, dispatcher, notePadding, accessors }) {\n    this.a = a\n\n    this.note = annotation.disable.indexOf(\"note\") === -1 && a.select('g.annotation-note')\n    this.noteContent = this.note && a.select('g.annotation-note-content')\n    this.connector = annotation.disable.indexOf(\"connector\") === -1 && a.select('g.annotation-connector')\n    this.subject = annotation.disable.indexOf(\"subject\") === -1 && a.select('g.annotation-subject')\n\n    if (dispatcher){\n      const handler = addHandlers.bind(null, dispatcher, annotation)\n      handler({ component: this.note, name: 'note' })\n      handler({ component: this.connector, name: 'connector' })\n      handler({ component: this.subject, name: 'subject' })\n    }\n  \n    this.annotation = annotation\n    this.editMode = annotation.editMode || editMode\n    this.notePadding = notePadding || 3\n    this.offsetCornerX = 0\n    this.offsetCornerY = 0\n\n    if (accessors && annotation.data){\n      this.init(accessors)\n    }\n  }\n\n  init(accessors) {\n    if (!this.annotation.x){\n      this.mapX(accessors)\n    }\n    if (!this.annotation.y){\n      this.mapY(accessors)\n    }\n  }\n\n  mapY(accessors){\n    if (accessors.y){\n      this.annotation.y = accessors.y(this.annotation.data)\n    }\n  }\n\n  mapX(accessors) {\n    if (accessors.x){\n      this.annotation.x = accessors.x(this.annotation.data)\n    }\n  }\n\n\n  updateEditMode () {\n    this.a.selectAll('circle.handle')\n      .remove()\n  }\n\n  drawOnSVG (component, builders) {\n    if (!Array.isArray(builders)){\n      builders = [ builders ]\n    }\n\n    builders\n      .filter(b => b)\n      .forEach(({ type, className, attrs, handles}) => {\n        if (type === \"handle\"){\n          addHandles({ group: component, r: attrs && attrs.r, handles })\n        } else {\n          newWithClass(component, [this.annotation], type, className)\n          \n          const el = component.select(`${type}.${className}`) \n          const attrKeys = Object.keys(attrs)\n          attrKeys.forEach(attr => {\n            if (attr === \"text\"){\n              el.text(attrs[attr])\n            } else {\n              el.attr(attr, attrs[attr])\n            }\n          })\n        }\n      })\n  }\n\n  //TODO: how to extend this to a drawOnCanvas mode? \n\n  getNoteBBox() { return bboxWithoutHandles(this.note, '.annotation-note-content text')}\n  getNoteBBoxOffset() { \n    const bbox = bboxWithoutHandles(this.note, '.annotation-note-content')\n    const transform = this.noteContent.attr('transform').split(/\\(|\\,|\\)/g)\n    bbox.offsetCornerX = parseFloat(transform[1]) + this.annotation.dx\n    bbox.offsetCornerY = parseFloat(transform[2]) + this.annotation.dy\n    bbox.offsetX = this.annotation.dx\n    bbox.offsetY = this.annotation.dy\n    return bbox \n  }\n\n  // getConnectorBBox() { return bboxWithoutHandles(this.connector)}\n  // getSubjectBBox() { return bboxWithoutHandles(this.subject)}\n  // getAnnotationBBox() { return bboxWithoutHandles(this.a)}\n\n  drawSubject (context={}) {\n    const subjectData = this.annotation.subject\n    const type = context.type\n    const subjectParams = { type: this, subjectData}\n\n    let subject = {}\n    if (type === \"circle\") subject = subjectCircle(subjectParams)\n    else if (type === \"rect\") subject = subjectRect(subjectParams)\n    else if (type === \"threshold\") subject = subjectThreshold(subjectParams)\n    else if (type === \"badge\") subject = subjectBadge(subjectParams)\n\n    let { components=[], handles=[] } = subject\n    if (this.editMode){\n      handles = handles.concat(this.mapHandles([{ drag: this.dragSubject.bind(this)}]))\n      components.push({ type: \"handle\", handles })\n    }\n\n    return components\n }\n\n  drawConnector (context={}) {\n    const connectorData = this.annotation.connector\n    const type = connectorData.type || context.type\n    const connectorParams = { type: this, connectorData}\n    connectorParams.subjectType = this.typeSettings && this.typeSettings.subject && this.typeSettings.subject.type \n\n    let connector = {}\n    if (type === \"curve\") connector = connectorCurve(connectorParams)\n    else if (type === \"elbow\") connector = connectorElbow(connectorParams)\n    else connector = connectorLine(connectorParams)\n\n    let { components=[], handles=[] } = connector\n    const line = components[0]\n    const endType = connectorData.end || context.end\n    let end = {}\n    if (endType === \"arrow\") end = connectorArrow({ annotation: this.annotation, start: line.data[1], end: line.data[0] })\n    else if (endType === \"dot\") end = connectorDot({ line })\n\n    if (end.components){ components = components.concat(end.components)}\n\n    if (this.editMode){\n      if (handles.length !== 0) components.push({ type: \"handle\", handles })\n    }\n    return components;\n  }\n\n  drawNote (context={}) {\n    const noteData = this.annotation.note\n    const align = noteData.align || context.align || 'dynamic'\n    const noteParams = { bbox: context.bbox, align, offset: this.annotation.offset }\n    const lineType = noteData.lineType || context.lineType\n    let note={}\n    if (lineType == \"vertical\") note = noteVertical(noteParams)\n    else if (lineType == \"horizontal\") note = noteHorizontal(noteParams)\n\n    let { components=[], handles=[] } = note\n    if (this.editMode) {\n      handles = this.mapHandles([{ x: 0, y: 0, drag: this.dragNote.bind(this)}])\n      components.push({ type: \"handle\", handles })\n    }\n    return components\n  }\n\n  drawNoteContent (context) {\n    const noteData = this.annotation.note\n    const padding = noteData.padding || this.notePadding\n    let orientation = noteData.orientation || context.orientation || 'topBottom'\n    const lineType = noteData.lineType || context.lineType\n    const align = noteData.align || context.align || 'dynamic'\n    const subjectType = this.typeSettings && this.typeSettings.subject && this.typeSettings.subject.type \n    \n    if (lineType == \"vertical\") orientation =  \"leftRight\"\n    else if (lineType == \"horizontal\") orientation = \"topBottom\"\n\n    const noteParams = { padding, bbox: context.bbox, offset: \n    this.annotation.offset, orientation, align }\n\n    const { x, y } = noteAlignment(noteParams)\n    this.offsetCornerX = x + this.annotation.dx\n    this.offsetCornerY = y + this.annotation.dy\n    this.note && this.noteContent.attr('transform', `translate(${x}, ${y})`)\n    \n    return []\n  } \n\n  drawOnScreen(component, drawFunction) { return this.drawOnSVG( component, drawFunction) }\n\n  redrawSubject(){\n    this.subject && this.drawOnScreen( this.subject, this.drawSubject())\n  }\n\n  redrawConnector(bbox=this.getNoteBBox()){\n    this.connector && this.drawOnScreen( this.connector, this.drawConnector())\n  }\n\n  redrawNote(bbox=this.getNoteBBox()){\n    this.noteContent && this.drawOnScreen( this.noteContent, this.drawNoteContent({ bbox }))\n    this.note && this.drawOnScreen( this.note, this.drawNote({ bbox }))  \n  }\n\n  setPosition(){\n    const position = this.annotation.position \n    this.a.attr('transform', `translate(${position.x}, ${position.y})`)\n  }\n\n  setOffset(){\n    if (this.note){\n      const offset = this.annotation.offset\n      this.note.attr('transform', `translate(${offset.x}, ${offset.y})`)\n    }\n  }\n\n  setPositionWithAccessors(accessors){\n    if (accessors && this.annotation.data){\n      this.mapX(accessors)\n      this.mapY(accessors)\n    }\n    this.setPosition()\n  }\n\n\n  setClassName(){\n    this.a.attr(\"class\", `annotation ${this.className && this.className()} ${this.editMode ? \"editable\" : \"\"} ${this.annotation.className || ''}`)\n  }\n\n  draw() {\n    this.setClassName()\n    this.setPosition()\n    this.setOffset()\n    this.redrawSubject()\n    this.redrawConnector()\n    this.redrawNote()\n  }\n\n  dragstarted() { event.sourceEvent.stopPropagation(); \n    this.a.classed(\"dragging\", true) \n    this.a.selectAll(\"circle.handle\").style(\"pointer-events\", \"none\")\n  }\n  dragended() { \n    this.a.classed(\"dragging\", false)\n    this.a.selectAll(\"circle.handle\").style(\"pointer-events\", \"all\")\n  }\n\n  dragSubject() {\n    const position = this.annotation.position\n    position.x += event.dx\n    position.y += event.dy\n    this.annotation.position = position\n  }\n\n  dragNote() {\n    const offset = this.annotation.offset\n    offset.x += event.dx\n    offset.y += event.dy\n    this.annotation.offset = offset\n  }\n\n  mapHandles(handles) {\n    return handles\n    .map(h => ({ ...h, \n      start: this.dragstarted.bind(this), end: this.dragended.bind(this) }))\n  }\n}\n\nexport const customType = (initialType, typeSettings, init) => {\n  return class customType extends initialType {\n    constructor (settings) {\n      super(settings)\n      this.typeSettings = typeSettings\n\n      if (typeSettings.disable){\n        typeSettings.disable.forEach(d => {\n          this[d] = undefined\n          if (d == \"note\"){\n            this.noteContent = undefined\n          }\n        })\n      }\n    }\n\n    static init(annotation, accessors){ \n      super.init(annotation, accessors); \n      if (init) {\n        annotation = init(annotation, accessors) \n      }\n      return annotation\n    }\n\n    className(){ return `${typeSettings.className || ''} ${super.className && super.className() || ''}`}\n\n    drawSubject(context){\n       this.typeSettings.subject = Object.assign({}, typeSettings.subject, this.typeSettings.subject)\n       return super.drawSubject({ ...context, ...this.typeSettings.subject })\n    }\n\n    drawConnector(context, subjectContext){\n      this.typeSettings.connector = Object.assign({}, typeSettings.connector, this.typeSettings.connector)\n      return super.drawConnector({ ...context, ...typeSettings.connector, ...this.typeSettings.connector })\n    }\n\n    drawNote(context){\n      this.typeSettings.note = Object.assign({}, typeSettings.note, this.typeSettings.note)\n      return super.drawNote({ ...context, ...typeSettings.note, ...this.typeSettings.note })\n    }\n\n    drawNoteContent(context){\n      return super.drawNoteContent({ ...context, ...typeSettings.note, ...this.typeSettings.note })\n    }\n  }\n}\n\nexport class d3NoteText extends Type {\n\n  constructor(params){\n    super(params)\n    this.textWrap = params.textWrap || 120\n    this.drawText()\n  }\n\n  updateTextWrap (textWrap) {\n    this.textWrap = textWrap\n    this.drawText()\n  }\n\n  //TODO: add update text functionality\n\n  drawText () {\n    if (this.note){\n      \n      newWithClass(this.note, [this.annotation], 'g', 'annotation-note-content')\n\n      const noteContent = this.note.select('g.annotation-note-content')\n      newWithClass(noteContent, [this.annotation], 'rect', 'annotation-note-bg')\n      newWithClass(noteContent, [this.annotation], 'text', 'annotation-note-label')\n      newWithClass(noteContent, [this.annotation], 'text', 'annotation-note-title')\n\n      let titleBBox = { height: 0 }\n      const label = this.a.select('text.annotation-note-label')\n      const wrapLength = this.annotation.note && this.annotation.note.wrap || \n        this.typeSettings && this.typeSettings.note && this.typeSettings.note.wrap ||\n        this.textWrap \n\n      if (this.annotation.note.title){\n        const title = this.a.select('text.annotation-note-title')\n        title.text(this.annotation.note.title)\n          .attr('dy', '1.1em')\n        title.call(wrap, wrapLength)\n        titleBBox = title.node().getBBox()\n      }\n\n      label.text(this.annotation.note.label)\n        .attr('dy', '1em')\n      label.call(wrap, wrapLength)\n\n      label.attr('y', titleBBox.height * 1.1 || 0)\n\n      const bbox = this.getNoteBBox()\n      this.a.select('rect.annotation-note-bg')\n        .attr('width', bbox.width)\n        .attr('height', bbox.height)\n    }\n  }\n}\n\nexport const d3Label = customType(d3NoteText, {\n  className: \"label\", \n  note: { align: \"middle\"}\n})\n\nexport const d3Callout = customType(d3NoteText, {\n  className: \"callout\",\n  note: { lineType: \"horizontal\" }\n})\n\nexport const d3CalloutElbow = customType(d3Callout, {\n  className: \"callout elbow\",\n  connector: { type: \"elbow\" }\n})\n\nexport const d3CalloutCurve = customType(d3Callout, {\n  className: \"callout curve\",\n  connector: { type: \"curve\" }\n})\n\nexport const d3Badge = customType(Type, {\n  className: \"badge\",\n  subject: { type: \"badge\"},\n  disable: ['connector', 'note']\n})\n\n\nexport const d3CalloutCircle = customType(d3CalloutElbow, {\n  className: \"callout circle\",\n  subject: { type: \"circle\"}\n})\n\nexport const d3CalloutRect = customType(d3CalloutElbow, {\n  className: \"callout rect\",\n  subject: { type: \"rect\"}\n})\n\n\nclass ThresholdMap extends d3Callout {\n\n  mapY(accessors){\n    super.mapY(accessors)\n    const a = this.annotation\n    if ((a.subject.x1 || a.subject.x2) && a.data && accessors.y){\n      a.y = accessors.y(a.data)\n    }\n  }\n\n  mapX(accessors) {\n    super.mapX(accessors)\n    const a = this.annotation\n    if ((a.subject.y1 || a.subject.y2) && a.data && accessors.x){\n      a.x = accessors.x(a.data)\n    }\n  }\n}\n\nexport const d3XYThreshold = customType(ThresholdMap, {\n  className: \"callout xythreshold\",\n  subject: { type: \"threshold\"}\n})\n\n\n\nexport const newWithClass = (a, d, type, className) => {\n  const group = a.selectAll(`${type}.${className}`).data(d)\n  group.enter()\n    .append(type)\n    .merge(group)\n    .attr('class', className)\n\n  group.exit().remove()\n  return a\n}\n\n\nconst addHandlers = ( dispatcher, annotation, { component, name }) => {\n  if (component){\n    component\n    .on(\"mouseover.annotations\", () => {\n      dispatcher.call(`${name}over`, component, annotation)})\n    .on(\"mouseout.annotations\", () => dispatcher.call(`${name}out`, component, annotation))\n    .on(\"click.annotations\", () => dispatcher.call(`${name}click`, component, annotation))\n  }\n}\n\n//Text wrapping code adapted from Mike Bostock\nconst wrap = (text, width) => {\n  text.each(function() {\n    var text = select(this),\n        words = text.text().split(/[ \\t\\r\\n]+/).reverse(),\n        word,\n        line = [],\n        lineNumber = 0,\n        lineHeight = .2, //ems\n        y = text.attr(\"y\"),\n        dy = parseFloat(text.attr(\"dy\")) || 0,\n        tspan = text.text(null)\n          .append(\"tspan\")\n          .attr(\"x\", 0)\n          .attr(\"dy\", dy + \"em\");\n\n    while (word = words.pop()) {\n      line.push(word);\n      tspan.text(line.join(\" \"));\n      if (tspan.node().getComputedTextLength() > width && line.length > 1) {\n        line.pop();\n        tspan.text(line.join(\" \"));\n        line = [word];\n        tspan = text.append(\"tspan\")\n          .attr(\"x\", 0)\n          .attr(\"dy\", lineHeight + dy + \"em\").text(word);\n      }\n    }\n  });\n}\n\nconst bboxWithoutHandles = (selection, selector=':not(.handle)') => {\n  if (!selection){\n    return { x: 0, y: 0, width: 0, height: 0}\n  }\n\n  return selection.selectAll(selector).nodes().reduce((p, c) => {\n        const bbox = c.getBBox()\n        p.x = Math.min(p.x, bbox.x)\n        p.y = Math.min(p.y, bbox.y)\n        p.width = Math.max(p.width, bbox.width)\n        p.height += bbox.height\n        return p\n      }, { x: 0, y: 0, width: 0, height: 0});\n}\n\nexport default {\n  Type,\n  d3Label,\n  d3Callout,\n  d3CalloutElbow,\n  d3CalloutCurve,\n  d3CalloutCircle,\n  d3CalloutRect,\n  d3XYThreshold,\n  d3Badge,\n  customType\n}\n","import Annotation from './Annotation'\nimport AnnotationCollection from './AnnotationCollection'\nimport { newWithClass, d3Callout } from './Types-d3'\nimport { select } from 'd3-selection'\nimport { dispatch } from 'd3-dispatch';\n\n\nexport default function annotation(){\n  let annotations = [],\n    collection,\n    context, //TODO: add canvas functionality\n    disable = [],\n    accessors = {},\n    accessorsInverse = {},\n    editMode = false,\n    ids,\n    type = d3Callout,\n    textWrap,\n    notePadding,\n    annotationDispatcher = dispatch(\n    \"subjectover\", \"subjectout\", \"subjectclick\", \n    \"connectorover\", \"connectorout\", \"connectorclick\", \n    \"noteover\", \"noteout\", \"noteclick\"),\n    sel;\n\n  const annotation = function(selection){\n    sel = selection\n    //TODO: check to see if this is still needed    \n    if (!editMode){\n      selection.selectAll(\"circle.handle\")\n        .remove()\n    }\n\n    const translatedAnnotations = annotations\n      .map(a => {\n        if (!a.type) { a.type = type }\n        if (!a.disable) {a.disable = disable}\n        return new Annotation(a)\n      });\n\n    collection = new AnnotationCollection ({\n      annotations: translatedAnnotations,\n      accessors,\n      accessorsInverse,\n      ids\n    })\n    \n\n    const annotationG = selection.selectAll('g').data([collection])\n    annotationG.enter().append('g').attr('class', `annotations`)\n    \n    const group = selection.select('g.annotations')\n    newWithClass(group, collection.annotations, 'g', 'annotation')\n\n    const annotation = group.selectAll('g.annotation')\n    \n    annotation \n      .each(function(d) {\n        const a = select(this)\n        const position = d.position\n\n        a.attr('class', 'annotation')\n\n        newWithClass(a, [d], 'g', 'annotation-connector')\n        newWithClass(a, [d], 'g', 'annotation-subject')\n        newWithClass(a, [d], 'g', 'annotation-note')\n        newWithClass(a.select('g.annotation-note'), [d], 'g', 'annotation-note-content')\n\n        d.type = new d.type({ a, annotation: d, textWrap, notePadding, editMode, \n          dispatcher: annotationDispatcher, accessors })\n        d.type.draw()\n      })\n  }\n\n  annotation.json = function() {\n    console.log('Annotations JSON was copied to your clipboard. Please note the annotation type is not JSON compatible. It appears in the objects array in the console, but not in the copied JSON.', collection.json)\n    window.copy(JSON.stringify(collection.json.map(a => { delete a.type; return a })))\n    return annotation\n  }\n\n  annotation.update = function(){\n    if (annotations && collection){\n      annotations = collection.annotations.map((a, i) => { a.type.draw(); return a }) \n    }\n    return annotation\n  }\n\n  annotation.updatedAccessors = function(){\n    collection.setPositionWithAccessors()\n    annotations = collection.annotations\n    return annotation\n  }\n\n  annotation.disable = function(_){\n    if (!arguments.length) return disable;\n    disable = _\n    if (collection) { \n      collection.updateDisable(disable)\n      annotations = collection.annotations\n    }\n    return annotation;\n  }\n\n  annotation.textWrap = function(_){\n    if (!arguments.length) return textWrap;\n    textWrap = _\n    if (collection) { \n      collection.updateTextWrap(textWrap)\n      annotations = collection.annotations\n    }\n    return annotation;\n  }\n\n  annotation.notePadding = function(_){\n    if (!arguments.length) return notePadding;\n    notePadding = _\n    if (collection) { \n      collection.updateNotePadding(notePadding)\n      annotations = collection.annotations\n    }\n    return annotation;\n  }\n\n  annotation.type = function(_, settings) {\n    if (!arguments.length) return type;\n    type = _;\n    if (collection) { \n      collection.annotations.map(a => {\n     \n        a.type.note && a.type.note.selectAll(\"*:not(.annotation-note-content)\").remove()\n        a.type.noteContent && a.type.noteContent.selectAll(\"*\").remove()\n        a.type.subject && a.type.subject.selectAll(\"*\").remove()\n        a.type.connector && a.type.connector.selectAll(\"*\").remove()\n        a.type.typeSettings = {}\n        a.type = type\n\n        a.subject = settings && settings.subject || a.subject\n        a.connector = settings && settings.connector || a.connector\n        a.note = settings && settings.note || a.note\n      })\n\n      annotations = collection.annotations\n    }\n    return annotation;\n  }\n\n  annotation.annotations = function(_) {\n    if (!arguments.length) return collection && collection.annotations || annotations;\n    annotations = _\n    return annotation;\n  };\n\n  annotation.context = function(_) {\n    if (!arguments.length) return context;\n    context = _\n    return annotation;\n  }; \n\n  annotation.accessors = function(_) {\n    if (!arguments.length) return accessors;\n    accessors = _;\n    return annotation\n  }\n\n  annotation.accessorsInverse = function(_) {\n    if (!arguments.length) return accessorsInverse;\n    accessorsInverse = _;\n    return annotation\n  }\n\n  annotation.ids = function(_) {\n    if (!arguments.length) return ids;\n    ids = _;\n    return annotation\n  }\n\n  annotation.editMode = function(_) {\n    if (!arguments.length) return editMode;\n    editMode = _\n\n    if (sel){\n      sel.selectAll('g.annotation')\n        .classed('editable', editMode)\n    }\n\n    if (collection) { \n      collection.editMode(editMode)\n      annotations = collection.annotations\n    }\n    return annotation\n  }\n\n  annotation.collection = function(_) {\n    if (!arguments.length) return collection;\n    collection = _\n    return annotation\n  }\n\n  annotation.on = function(){\n    const value = annotationDispatcher.on.apply(annotationDispatcher, arguments)\n    return value === annotationDispatcher ? annotation : value;\n  }\n\n  return annotation;\n\n};","import annotation from './src/Adapter-d3'\nimport { Type, d3Label, d3Callout, d3CalloutCurve, d3CalloutElbow, d3CalloutCircle, \n d3CalloutRect, d3XYThreshold, d3Badge, customType } from './src/Types-d3'\n\nexport {\n  annotation,\n  Type as annotationTypeBase ,\n  d3Label as annotationLabel ,\n  d3Callout as annotationCallout ,\n  d3CalloutCurve as annotationCalloutCurve ,\n  d3CalloutElbow as annotationCalloutElbow ,\n  d3CalloutCircle as annotationCalloutCircle ,\n  d3CalloutRect as annotationCalloutRect ,\n  d3XYThreshold as annotationXYThreshold ,\n  d3Badge as annotationBadge ,\n  customType as annotationCustomType \n}\n\nexport default {\n  annotation,\n  annotationTypeBase : Type,\n  annotationLabel : d3Label,\n  annotationCallout : d3Callout,\n  annotationCalloutCurve : d3CalloutCurve,\n  annotationCalloutElbow : d3CalloutElbow,\n  annotationCalloutCircle : d3CalloutCircle,\n  annotationCalloutRect : d3CalloutRect,\n  annotationXYThreshold : d3XYThreshold,\n  annotationBadge : d3Badge,\n  annotationCustomType : customType\n}"],"names":["Annotation","x","y","dy","dx","data","type","subject","connector","note","disable","id","className","_dx","_dy","_x","_y","_className","setPosition","selectAll","nodes","length","redrawSubject","setOffset","redrawConnector","redrawNote","setClassName","updatePosition","updateOffset","json","Object","keys","AnnotationCollection","annotations","accessors","accessorsInverse","newSettings","forEach","d","undefined","setPositionWithAccessors","editMode","a","updateEditMode","remove","textWrap","updateTextWrap","notePadding","map","k","getNoteBBoxOffset","positionX","positionY","pointHandle","cx","cy","move","circleHandles","r1","r2","padding","h","Math","sqrt","rectHandles","x1","y1","x2","y2","width","height","w","abs","min","max","lineHandles","minY","minX","addHandles","group","handles","r","enter","append","attr","call","drag","container","select","node","on","start","end","exit","leftRightDynamic","align","topBottomDynamic","bbox","orientation","offset","lineBuilder","curve","curveLinear","canvasContext","lineGen","line","builder","context","pathMethods","attrs","arcBuilder","arcShape","arc","innerRadius","outerRadius","radius","startAngle","endAngle","PI","components","lineSetup","subjectType","annotation","position","subjectData","angle","asin","radiusPadding","cos","sin","connectorData","diffY","diffX","xe","ye","opposite","acos","points","createPoints","curveCatmullRom","cHandles","c","i","index","updatePoint","event","mapHandles","bind","anchors","diff","p","push","size","angleOffset","atan","dot","transform","updateRadius","rect","updateWidth","updateHeight","rHandles","circlebg","circle","pointer","dragBadge","bHandles","text","Type","dispatcher","indexOf","noteContent","handler","addHandlers","component","name","offsetCornerX","offsetCornerY","init","mapX","mapY","builders","Array","isArray","filter","b","newWithClass","el","attrKeys","bboxWithoutHandles","split","parseFloat","offsetX","offsetY","subjectParams","subjectCircle","subjectRect","subjectThreshold","subjectBadge","concat","dragSubject","connectorParams","typeSettings","connectorCurve","connectorElbow","connectorLine","endType","connectorArrow","connectorDot","noteData","noteParams","lineType","noteVertical","noteHorizontal","dragNote","noteAlignment","drawFunction","drawOnSVG","drawOnScreen","drawSubject","getNoteBBox","drawConnector","drawNoteContent","drawNote","sourceEvent","stopPropagation","classed","style","dragstarted","dragended","customType","initialType","settings","babelHelpers.get","assign","subjectContext","d3NoteText","params","drawText","titleBBox","label","wrapLength","wrap","title","getBBox","d3Label","d3Callout","d3CalloutElbow","d3CalloutCurve","d3Badge","d3CalloutCircle","d3CalloutRect","ThresholdMap","d3XYThreshold","merge","each","words","reverse","word","lineNumber","lineHeight","tspan","pop","join","getComputedTextLength","selection","selector","reduce","collection","ids","annotationDispatcher","dispatch","sel","translatedAnnotations","annotationG","draw","console","log","window","copy","JSON","stringify","update","updatedAccessors","_","arguments","updateDisable","updateNotePadding","value","apply","annotationTypeBase","annotationLabel","annotationCallout","annotationCalloutCurve","annotationCalloutElbow","annotationCalloutCircle","annotationCalloutRect","annotationXYThreshold","annotationBadge","annotationCustomType"],"mappings":"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"}